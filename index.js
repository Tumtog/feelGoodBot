require("dotenv").config();
const { Bot, InlineKeyboard } = require("grammy");
const cron = require("node-cron");
const express = require("express");
const bodyParser = require("body-parser");

const bot = new Bot(process.env.BOT_API_KEY);
const app = express();
app.use(bodyParser.json());

app.post("/webhook", (req, res) => {
  bot.handleUpdate(req.body);
  res.sendStatus(200);
});

// –£–¥–∞–ª–µ–Ω–∏–µ –≤–µ–±—Ö—É–∫–∞ –ø–µ—Ä–µ–¥ —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π –Ω–æ–≤–æ–≥–æ
const setupWebhook = async () => {
  try {
    await bot.api.deleteWebhook();
    console.log("Webhook deleted successfully");

    const webhookUrl =
      "https://feel-good-7ttut77ol-tumtogs-projects.vercel.app/webhook";
    await bot.api.setWebhook(webhookUrl);
    console.log("Webhook set successfully");
  } catch (err) {
    console.error("Error:", err);
  }
};

setupWebhook();

app.listen(3000, () => {
  console.log("Server is running on port 3000");
});

module.exports = app;

// –ö–æ–º–∞–Ω–¥—ã
bot.api.setMyCommands([
  {
    command: "start",
    description: "–ù–∞—á–∞—Ç—å",
  },
]);

// –ü–æ—Ö–≤–∞–ª—ã –¥–ª—è –∂–µ–Ω—â–∏–Ω
const womenCompliments = [
  "–¢–∏ —á—É–¥–æ–≤–æ —Å–ø—Ä–∞–≤–ª—è—î—à—Å—è! üåü",
  "–¢–∏ –≤–∏–≥–ª—è–¥–∞—î—à –ø—Ä–∏–≥–æ–ª–æ–º—à–ª–∏–≤–æ! üòç",
  "–£ —Ç–µ–±–µ —á—É–¥–æ–≤–µ –ø–æ—á—É—Ç—Ç—è –≥—É–º–æ—Ä—É! üòÇ",
  "–¢–∏ –¥—É–∂–µ —Ä–æ–∑—É–º–Ω–∞! üí°",
  "–¢–∏ –Ω–∞–¥–∏—Ö–∞—î—à –º–µ–Ω–µ! ‚ú®",
  "–¢–∏ - —Å–ø—Ä–∞–≤–∂–Ω—è –∑—ñ—Ä–∫–∞! üåü",
  "–¢–∏ —Ä–æ–±–∏—à —Ü–µ–π —Å–≤—ñ—Ç —è—Å–∫—Ä–∞–≤—ñ—à–∏–º! üåà",
  "–¢–≤–æ—è —É—Å–º—ñ—à–∫–∞ - —Ü–µ —Å–æ–Ω—è—á–Ω–∏–π –ø—Ä–æ–º—ñ–Ω—å! ‚òÄÔ∏è",
  "–¢–∏ –¥—É–∂–µ —Ç–∞–ª–∞–Ω–æ–≤–∏—Ç–∞! üé®",
  "–¢–∏ - –Ω–µ–ø–µ—Ä–µ–≤–µ—Ä—à–µ–Ω–∞! üëë",
  "–¢–∏ —Ç–∞–∫–∞ –Ω—ñ–∂–Ω–∞ —ñ —á—É–π–Ω–∞! üíñ",
  "–¢–≤–æ—è –¥–æ–±—Ä–æ—Ç–∞ –≤—Ä–∞–∂–∞—î! üå∑",
  "–¢–∏ - –¥–∂–µ—Ä–µ–ª–æ –ø–æ–∑–∏—Ç–∏–≤—É! üåª",
  "–¢–∏ –∑–∞—Å–ª—É–≥–æ–≤—É—î—à –Ω–∞ –≤—Å—ñ –∫–æ–º–ø–ª—ñ–º–µ–Ω—Ç–∏ —Å–≤—ñ—Ç—É! üåè",
  "–¢–∏ - —Å–ø—Ä–∞–≤–∂–Ω—è –≥–µ—Ä–æ—ó–Ω—è! ü¶∏‚Äç‚ôÄÔ∏è",
  "–¢–≤–æ—è –µ–Ω–µ—Ä–≥—ñ—è –∑–∞—Ä–∞–∑–ª–∏–≤–∞! ‚ö°",
  "–¢–∏ - –Ω–∞—Ç—Ö–Ω–µ–Ω–Ω—è –¥–ª—è –≤—Å—ñ—Ö –Ω–∞–≤–∫–æ–ª–æ! üí´",
  "–¢–∏ —Ä–æ–±–∏—à –ª—é–¥–µ–π —â–∞—Å–ª–∏–≤–∏–º–∏! üòä",
  "–¢–≤—ñ–π —Å—Ç–∏–ª—å –≤—Ä–∞–∂–∞—î! üëó",
  "–¢–∏ –∑–∞–≤–∂–¥–∏ –Ω–∞ –≤–∏—Å–æ—Ç—ñ! üöÄ",
  "–¢–∏ - –Ω–µ–π–º–æ–≤—ñ—Ä–Ω–∞! üèÜ",
  "–¢–≤–æ—è –∫—Ä–∞—Å–∞ –Ω–µ–ø–µ—Ä–µ–≤–µ—Ä—à–µ–Ω–∞! üåπ",
  "–¢–∏ - —Å–ø—Ä–∞–≤–∂–Ω—è –ª–µ–¥—ñ! üë∏",
  "–¢–≤–æ—è —Ç–µ–ø–ª–æ—Ç–∞ –∑–∞–≤–∂–¥–∏ –∑—ñ–≥—Ä—ñ–≤–∞—î! üåû",
  "–¢–∏ - —è–∫ –ª—ñ—Ç–Ω—ñ–π –¥–µ–Ω—å! üåû",
  "–¢–∏ - —á—É–¥–æ–≤–∞ —ñ —É–Ω—ñ–∫–∞–ª—å–Ω–∞! ü¶Ñ",
  "–¢–≤—ñ–π —Å–º–∞–∫ –±–µ–∑–¥–æ–≥–∞–Ω–Ω–∏–π! üë†",
  "–¢–∏ —Ä–æ–±–∏—à —Ü–µ–π —Å–≤—ñ—Ç –∫—Ä–∞—â–∏–º! üåü",
  "–¢–∏ –≤—Ä–∞–∂–∞—î—à —Å–≤–æ—ó–º —Ä–æ–∑—É–º–æ–º! üß†",
  "–¢–∏ - —Å–ø—Ä–∞–≤–∂–Ω—è –º–∞–π—Å—Ç—Ä–∏–Ω—è! üßµ",
  "–¢–≤–æ—è —á–∞—Ä—ñ–≤–Ω—ñ—Å—Ç—å –Ω–µ –º–∞—î –º–µ–∂! üí´",
  "–¢–∏ - –ø—Ä–æ—Å—Ç–æ —á—É–¥–æ–≤–∞! üåü",
  "–¢–∏ - –º–æ—è –∑—ñ—Ä–æ—á–∫–∞! ‚≠ê",
  "–¢–∏ - —Å–ø—Ä–∞–≤–∂–Ω—è –º—É–∑–∞! üéº",
  "–¢–≤–æ—è –Ω—ñ–∂–Ω—ñ—Å—Ç—å –Ω–µ –º–∞—î —Ä—ñ–≤–Ω–∏—Ö! üå∏",
  "–¢–∏ - –¥–∂–µ—Ä–µ–ª–æ —â–∞—Å—Ç—è! üéâ",
  "–¢–≤–æ—è –≤–ø–µ–≤–Ω–µ–Ω—ñ—Å—Ç—å –∑–∞—Ö–æ–ø–ª—é—î! üí™",
  "–¢–∏ - —Å–ø—Ä–∞–≤–∂–Ω—ñ–π —Å–∫–∞—Ä–±! üíé",
  "–¢–≤–æ—è –∫—Ä–∞—Å–∞ –∑–∞—á–∞—Ä–æ–≤—É—î! ü•∞",
  "–¢–∏ - –Ω–µ–π–º–æ–≤—ñ—Ä–Ω–∞ –ª—é–¥–∏–Ω–∞! üåü",
  "–¢–∏ - —á—É–¥–æ! üåü",
  "–¢–≤–æ—è –µ–ª–µ–≥–∞–Ω—Ç–Ω—ñ—Å—Ç—å –≤—Ä–∞–∂–∞—î! üëó",
  "–¢–∏ - —è–∫ –ø—Ä–æ–º—ñ–Ω—å —Å–≤—ñ—Ç–ª–∞! üåü",
  "–¢–∏ - –Ω—ñ–∂–Ω–∞ —ñ —á—É–π–Ω–∞! üíï",
  "–¢–≤–æ—è —É—Å–º—ñ—à–∫–∞ - —Ü–µ —â–∞—Å—Ç—è! üòä",
  "–¢–∏ - —Å–ø—Ä–∞–≤–∂–Ω—è –∑—ñ—Ä–∫–∞ —à–æ—É! üå†",
  "–¢–≤–æ—è –¥–æ–±—Ä–æ—Ç–∞ –æ—Å–≤—ñ—Ç–ª—é—î —à–ª—è—Ö! ‚ú®",
  "–¢–∏ - –Ω–µ–π–º–æ–≤—ñ—Ä–Ω–∞ —ñ –Ω–µ–ø–µ—Ä–µ–≤–µ—Ä—à–µ–Ω–∞! üí´",
];

// –ü–æ—Ö–≤–∞–ª—ã –¥–ª—è –º—É–∂—á–∏–Ω
const menCompliments = [
  "–¢–∏ —á—É–¥–æ–≤–æ —Å–ø—Ä–∞–≤–ª—è—î—à—Å—è! üí™",
  "–¢–∏ –≤–∏–≥–ª—è–¥–∞—î—à –ø—Ä–∏–≥–æ–ª–æ–º—à–ª–∏–≤–æ! üòé",
  "–£ —Ç–µ–±–µ —á—É–¥–æ–≤–µ –ø–æ—á—É—Ç—Ç—è –≥—É–º–æ—Ä—É! üòÇ",
  "–¢–∏ –¥—É–∂–µ —Ä–æ–∑—É–º–Ω–∏–π! üß†",
  "–¢–∏ –Ω–∞–¥–∏—Ö–∞—î—à –º–µ–Ω–µ! üî•",
  "–¢–∏ - —Å–ø—Ä–∞–≤–∂–Ω—ñ–π –ª—ñ–¥–µ—Ä! üèÜ",
  "–¢–∏ –∑–∞–≤–∂–¥–∏ –Ω–∞ –≤–∏—Å–æ—Ç—ñ! üöÄ",
  "–¢–≤–æ—è –≤–ø–µ–≤–Ω–µ–Ω—ñ—Å—Ç—å –∑–∞—Ö–æ–ø–ª—é—î! üí™",
  "–¢–∏ - —Å–ø—Ä–∞–≤–∂–Ω—ñ–π –¥–∂–µ–Ω—Ç–ª—å–º–µ–Ω! üëî",
  "–¢–≤–æ—è —Å–∏–ª–∞ –≤—Ä–∞–∂–∞—î! üí™",
  "–¢–∏ - –∑—Ä–∞–∑–æ–∫ –º—É–∂–Ω–æ—Å—Ç—ñ! ü¶∏‚Äç‚ôÇÔ∏è",
  "–¢–≤–æ—è —Ö–∞—Ä–∏–∑–º–∞ –≤—Ä–∞–∂–∞—î! üòé",
  "–¢–∏ - –Ω–µ–π–º–æ–≤—ñ—Ä–Ω–∏–π! üåü",
  "–¢–∏ - —Å–ø—Ä–∞–≤–∂–Ω—ñ–π –ø—Ä–æ—Ñ–µ—Å—ñ–æ–Ω–∞–ª! üéØ",
  "–¢–∏ –∑–∞–≤–∂–¥–∏ –Ω–∞ –≤–∏—Å–æ—Ç—ñ! üöÄ",
  "–¢–≤–æ—è –µ–Ω–µ—Ä–≥—ñ—è –∑–∞—Ä–∞–∂–∞—î! ‚ö°",
  "–¢–∏ - —Å–ø—Ä–∞–≤–∂–Ω—ñ–π –º–∞–π—Å—Ç–µ—Ä! üõ†Ô∏è",
  "–¢–∏ –∑–∞–≤–∂–¥–∏ –≤–ø–µ–≤–Ω–µ–Ω–∏–π —É —Å–æ–±—ñ! üí™",
  "–¢–∏ - —á—É–¥–æ–≤–∏–π –¥—Ä—É–≥! ü§ù",
  "–¢–∏ –Ω–∞–¥–∏—Ö–∞—î—à –Ω–∞ –≤–µ–ª–∏–∫—ñ —Å–ø—Ä–∞–≤–∏! üåü",
  "–¢–≤—ñ–π —Å—Ç–∏–ª—å –±–µ–∑–¥–æ–≥–∞–Ω–Ω–∏–π! üëî",
  "–¢–∏ - –≤—Ç—ñ–ª–µ–Ω–Ω—è –Ω–∞–¥—ñ—ó! üå†",
  "–¢–∏ - —Å–ø—Ä–∞–≤–∂–Ω—ñ–π –≥–µ—Ä–æ–π! ü¶∏‚Äç‚ôÇÔ∏è",
  "–¢–≤–æ—è –º—É–¥—Ä—ñ—Å—Ç—å –∑–∞—Ö–æ–ø–ª—é—î! üìö",
  "–¢–∏ –∑–∞–≤–∂–¥–∏ –∑–Ω–∞—î—à, —è–∫ –≤—Ä–∞–∑–∏—Ç–∏! üî•",
  "–¢–∏ - –ø—Ä–∏–∫–ª–∞–¥ –¥–ª—è –Ω–∞—Å–ª—ñ–¥—É–≤–∞–Ω–Ω—è! üí™",
  "–¢–≤–æ—è –¥–æ–±—Ä–æ—Ç–∞ –≤—Ä–∞–∂–∞—î! üåü",
  "–¢–∏ - –Ω–µ–π–º–æ–≤—ñ—Ä–Ω–∏–π! üí´",
  "–¢–∏ –∑–∞–≤–∂–¥–∏ –∑–Ω–∞—î—à, —â–æ —Å–∫–∞–∑–∞—Ç–∏! üó£Ô∏è",
  "–¢–∏ - —Å–ø—Ä–∞–≤–∂–Ω—ñ–π –∞—Ä—Ç–∏—Å—Ç! üé®",
  "–¢–∏ - —á—É–¥–æ–≤–∏–π –ø–∞—Ä—Ç–Ω–µ—Ä! üíè",
  "–¢–≤–æ—è –µ–ª–µ–≥–∞–Ω—Ç–Ω—ñ—Å—Ç—å –≤—Ä–∞–∂–∞—î! üëî",
  "–¢–∏ - —Å–ø—Ä–∞–≤–∂–Ω—ñ–π –≥—É—Ä—É! üßò‚Äç‚ôÇÔ∏è",
  "–¢–≤–æ—è —Ö–∞—Ä–∏–∑–º–∞ –ø—Ä–æ—Å—Ç–æ –Ω–µ–π–º–æ–≤—ñ—Ä–Ω–∞! üòé",
  "–¢–∏ - —Å–ø—Ä–∞–≤–∂–Ω—ñ–π –∑—Ä–∞–∑–æ–∫! üèÜ",
  "–¢–≤–æ—è —Å–∏–ª–∞ —ñ —Ä–æ–∑—É–º –ø–æ—î–¥–Ω—É—é—Ç—å—Å—è! üß†",
  "–¢–∏ - –ª—é–¥–∏–Ω–∞ –∑ –≤–µ–ª–∏–∫–æ—ó –ª—ñ—Ç–µ—Ä–∏! üíØ",
  "–¢–≤—ñ–π —Å—Ç–∏–ª—å –≤—Ä–∞–∂–∞—î! üëü",
  "–¢–∏ - –¥–∂–µ—Ä–µ–ª–æ –Ω–∞—Ç—Ö–Ω–µ–Ω–Ω—è! üåü",
  "–¢–∏ - —Å–ø—Ä–∞–≤–∂–Ω—ñ–π –º–∞—á–æ! üí™",
  "–¢–≤–æ—è –≤—ñ–¥–¥–∞–Ω—ñ—Å—Ç—å –≤—Ä–∞–∂–∞—î! üôå",
  "–¢–∏ - —É–Ω—ñ–∫–∞–ª—å–Ω–∏–π! ‚≠ê",
  "–¢–∏ - —Å–ø—Ä–∞–≤–∂–Ω—ñ–π —Å—Ç—Ä–∞—Ç–µ–≥! üß†",
  "–¢–≤–æ—è —â–∏—Ä—ñ—Å—Ç—å –≤—Ä–∞–∂–∞—î! üíñ",
  "–¢–∏ - —Å–ø—Ä–∞–≤–∂–Ω—ñ–π —Å–ø–æ—Ä—Ç—Å–º–µ–Ω! üèãÔ∏è",
  "–¢–∏ –∑–∞–≤–∂–¥–∏ –∑–Ω–∞—î—à, —è–∫ –±—É—Ç–∏ –≤ —Ü–µ–Ω—Ç—Ä—ñ —É–≤–∞–≥–∏! üåü",
  "–¢–∏ - –¥–∏–≤–æ–≤–∏–∂–Ω–∏–π! üéâ",
  "–¢–≤–æ—è —Ö–∞—Ä–∏–∑–º–∞ –ø—Ä–æ—Å—Ç–æ –∑–∞—à–∫–∞–ª—é—î! ‚ö°",
];

// –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –ø–æ—Ö–≤–∞–ª—ã –¥–ª—è –°–Ω—ñ–∂–∞–Ω–∏
const snezhanaCompliments = [
  "–°–Ω—ñ–∂–∞–Ω–∞, —Ç–∏ –ø—Ä–æ—Å—Ç–æ —á—É–¥–æ–≤–∞! üåü",
  "–ú–æ—è –°–Ω—ñ–∂–∞–Ω–∞, —Ç–∏ –Ω–µ–π–º–æ–≤—ñ—Ä–Ω–∞! üòç",
  "–¢–∏ - –º–æ—î –Ω–∞—Ç—Ö–Ω–µ–Ω–Ω—è, –°–Ω—ñ–∂–∞–Ω–∞! ‚ú®",
  "–¢–∏ - –º–æ—è –∑—ñ—Ä–æ—á–∫–∞, –°–Ω—ñ–∂–∞–Ω–∞! üåü",
  "–°–Ω—ñ–∂–∞–Ω–∞, —Ç–∏ —Ä–æ–±–∏—à –º—ñ–π —Å–≤—ñ—Ç —è—Å–∫—Ä–∞–≤—ñ—à–∏–º! üåà",
  "–¢–≤–æ—è —É—Å–º—ñ—à–∫–∞, –°–Ω—ñ–∂–∞–Ω–∞, - —Ü–µ –Ω–∞–π–∫—Ä–∞—â–∏–π –ø–æ–¥–∞—Ä—É–Ω–æ–∫! ‚òÄÔ∏è",
  "–ú–æ—è –∫–æ—Ö–∞–Ω–∞ –°–Ω—ñ–∂–∞–Ω–∞, —Ç–∏ - –Ω–∞–π–∫—Ä–∞—â–∞! üíñ",
  "–°–Ω—ñ–∂–∞–Ω–∞, —Ç–∏ - —Å–ø—Ä–∞–≤–∂–Ω—è –∫–æ—Ä–æ–ª–µ–≤–∞! üëë",
  "–¢–∏ - –º–æ—î —Å–æ–Ω—Ü–µ, –°–Ω—ñ–∂–∞–Ω–∞! üåû",
  "–°–Ω—ñ–∂–∞–Ω–∞, —Ç–≤–æ—è –¥–æ–±—Ä–æ—Ç–∞ –±–µ–∑–º–µ–∂–Ω–∞! üå∑",
  "–ú–æ—è –°–Ω—ñ–∂–∞–Ω–∞, —Ç–∏ - –¥–∂–µ—Ä–µ–ª–æ —â–∞—Å—Ç—è –¥–ª—è –º–µ–Ω–µ! üéâ",
  "–¢–∏ - —á—É–¥–æ, –°–Ω—ñ–∂–∞–Ω–∞! üåü",
  "–°–Ω—ñ–∂–∞–Ω–∞, —Ç–∏ - –º–æ—è –º—É–∑–∞! üéº",
  "–¢–≤–æ—è –Ω—ñ–∂–Ω—ñ—Å—Ç—å, –°–Ω—ñ–∂–∞–Ω–∞, –ø—Ä–æ—Å—Ç–æ –Ω–µ–π–º–æ–≤—ñ—Ä–Ω–∞! üå∏",
  "–°–Ω—ñ–∂–∞–Ω–∞, —Ç–∏ - –Ω–∞–π–∫—Ä–∞—Å–∏–≤—ñ—à–∞! üåπ",
  "–¢–∏ - –º—ñ–π –∞–Ω–≥–µ–ª, –°–Ω—ñ–∂–∞–Ω–∞! üòá",
  "–°–Ω—ñ–∂–∞–Ω–∞, —Ç–∏ - –º–æ—è –≤–µ–ª–∏–∫–∞ –ª—é–±–æ–≤! üíï",
  "–¢–∏ - –º–æ—è —Ä–∞–¥—ñ—Å—Ç—å, –°–Ω—ñ–∂–∞–Ω–∞! üéä",
  "–°–Ω—ñ–∂–∞–Ω–∞, —Ç–≤–æ—è —á–∞—Ä—ñ–≤–Ω—ñ—Å—Ç—å –Ω–µ –º–∞—î –º–µ–∂! üí´",
  "–¢–∏ - –º–æ—î —Å–µ—Ä—Ü–µ, –°–Ω—ñ–∂–∞–Ω–∞! ‚ù§Ô∏è",
  "–°–Ω—ñ–∂–∞–Ω–∞, —Ç–∏ - –º—ñ–π –≤—Å–µ—Å–≤—ñ—Ç! üåå",
  "–¢–≤–æ—è —É—Å–º—ñ—à–∫–∞ - —Ü–µ –º–∞–≥—ñ—è, –°–Ω—ñ–∂–∞–Ω–∞! ‚ú®",
  "–°–Ω—ñ–∂–∞–Ω–∞, —Ç–∏ - —è–∫ —Å–æ–Ω—Ü–µ –≤ –ø–æ—Ö–º—É—Ä–∏–π –¥–µ–Ω—å! üåû",
  "–¢–∏ - –º—ñ–π –ø–æ–¥–∞—Ä—É–Ω–æ–∫ –¥–æ–ª—ñ, –°–Ω—ñ–∂–∞–Ω–∞! üéÅ",
  "–°–Ω—ñ–∂–∞–Ω–∞, —Ç–∏ - –±–µ–∑—Ü—ñ–Ω–Ω–∞! üíé",
  "–¢–∏ - –º–æ—è –∫–∞–∑–∫–∞, –°–Ω—ñ–∂–∞–Ω–∞! üìñ",
  "–°–Ω—ñ–∂–∞–Ω–∞, —Ç–∏ - –Ω–∞–π–∫—Ä–∞—â–∞ —É —Å–≤—ñ—Ç—ñ! üåè",
  "–¢–∏ - –º–æ—î –Ω–∞—Ç—Ö–Ω–µ–Ω–Ω—è, –°–Ω—ñ–∂–∞–Ω–∞! üåü",
  "–°–Ω—ñ–∂–∞–Ω–∞, —Ç–∏ - —Å–ø—Ä–∞–≤–∂–Ω—ñ–π —Å–∫–∞—Ä–±! üèÜ",
  "–¢–∏ - –º–æ—è –ª—é–±–æ–≤, –°–Ω—ñ–∂–∞–Ω–∞! üíò",
  "–°–Ω—ñ–∂–∞–Ω–∞, —Ç–∏ - –º–æ—è –≥–æ—Ä–¥—ñ—Å—Ç—å! üèÖ",
  "–¢–≤–æ—è –∫—Ä–∞—Å–∞, –°–Ω—ñ–∂–∞–Ω–∞, –ø—Ä–æ—Å—Ç–æ –Ω–µ–∑—Ä—ñ–≤–Ω—è–Ω–Ω–∞! üòç",
  "–°–Ω—ñ–∂–∞–Ω–∞, —Ç–∏ - –º–æ—è —Ä–∞–¥—ñ—Å—Ç—å! üòä",
  "–¢–∏ - –Ω–∞–π—á–∞—Ä—ñ–≤–Ω—ñ—à–∞, –°–Ω—ñ–∂–∞–Ω–∞! üåü",
  "–°–Ω—ñ–∂–∞–Ω–∞, —Ç–∏ - –º–æ—è –¥—É—à–∞! üíñ",
  "–¢–∏ - —è–∫ –ø—Ä–æ–º—ñ–Ω—å —Å–≤—ñ—Ç–ª–∞, –°–Ω—ñ–∂–∞–Ω–∞! üåü",
  "–°–Ω—ñ–∂–∞–Ω–∞, —Ç–∏ - –Ω–∞–π–∫—Ä–∞—â–∞ –∑ –Ω–∞–π–∫—Ä–∞—â–∏—Ö! ‚≠ê",
  "–¢–∏ - –º–æ—î —â–∞—Å—Ç—è, –°–Ω—ñ–∂–∞–Ω–∞! üéâ",
  "–°–Ω—ñ–∂–∞–Ω–∞, —Ç–∏ - –º–æ—è –Ω–∞–π–∫—Ä–∞—â–∞ –ø–æ–¥—Ä—É–≥–∞! ü§ù",
  "–¢–≤–æ—è –∫—Ä–∞—Å–∞ –∑–∞—Ö–æ–ø–ª—é—î, –°–Ω—ñ–∂–∞–Ω–∞! üåπ",
  "–°–Ω—ñ–∂–∞–Ω–∞, —Ç–∏ - —Å–ø—Ä–∞–≤–∂–Ω—è –ø—Ä–∏–Ω—Ü–µ—Å–∞! üë∏",
  "–¢–∏ - –º—ñ–π —ñ–¥–µ–∞–ª, –°–Ω—ñ–∂–∞–Ω–∞! üí´",
  "–°–Ω—ñ–∂–∞–Ω–∞, —Ç–∏ - –º–æ—î –≤—Å–µ! ‚ù§Ô∏è",
  "–¢–≤–æ—è –¥–æ–±—Ä–æ—Ç–∞, –°–Ω—ñ–∂–∞–Ω–∞, - —Ü–µ –º–æ—î –Ω–∞—Ç—Ö–Ω–µ–Ω–Ω—è! üå∑",
  "–°–Ω—ñ–∂–∞–Ω–∞, —Ç–∏ - –º—ñ–π –≤—Å–µ—Å–≤—ñ—Ç! üåå",
  "–¢–∏ - –º–æ—è –∫–æ—Ö–∞–Ω–∞, –°–Ω—ñ–∂–∞–Ω–∞! üíï",
  "–°–Ω—ñ–∂–∞–Ω–∞, —Ç–∏ - –Ω–∞–π–∫—Ä–∞—â–∞! ü•á",
  "–¢–≤–æ—è —É—Å–º—ñ—à–∫–∞, –°–Ω—ñ–∂–∞–Ω–∞, - —Ü–µ –º–æ—î —Å–æ–Ω—Ü–µ! ‚òÄÔ∏è",
  "–°–Ω—ñ–∂–∞–Ω–∞, —Ç–∏ - –º–æ—è –≥–æ—Ä–¥—ñ—Å—Ç—å! üèÖ",
];
const snezhanaId = 408453544; // –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ ID –°–Ω—ñ–∂–∞–Ω–∏
const userGender = {}; // –û–±—ä–µ–∫—Ç –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ–ª–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ chatId

const getRandomCompliment = (compliments) => {
  return compliments[Math.floor(Math.random() * compliments.length)];
};

const sendRandomCompliment = async (chatId, compliments) => {
  const compliment = getRandomCompliment(compliments);
  await bot.api.sendMessage(chatId, compliment);
};

const getRandomTime = (startHour, startMinute, endHour, endMinute) => {
  const start = new Date();
  start.setHours(startHour, startMinute, 0, 0);
  const end = new Date();
  end.setHours(endHour, endMinute, 0, 0);

  const randomTime = new Date(
    start.getTime() + Math.random() * (end.getTime() - start.getTime())
  );
  return {
    hour: randomTime.getHours(),
    minute: randomTime.getMinutes(),
  };
};

const scheduleDailyMessages = (chatId, compliments) => {
  // –ü–ª–∞–Ω–∏—Ä—É–µ–º –ø–µ—Ä–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–∞ 8:00
  cron.schedule("0 8 * * *", () => sendRandomCompliment(chatId, compliments), {
    scheduled: true,
    timezone: "Europe/Kiev",
  });

  // –ü–ª–∞–Ω–∏—Ä—É–µ–º –ø–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–∞ 22:30
  cron.schedule(
    "30 22 * * *",
    () => sendRandomCompliment(chatId, compliments),
    {
      scheduled: true,
      timezone: "Europe/Kiev",
    }
  );

  // –ü–ª–∞–Ω–∏—Ä—É–µ–º 5 —Å–ª—É—á–∞–π–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Ç–µ—á–µ–Ω–∏–µ –¥–Ω—è
  for (let i = 0; i < 5; i++) {
    const { hour, minute } = getRandomTime(8, 1, 22, 29); // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–ª—É—á–∞–π–Ω–æ–µ –≤—Ä–µ–º—è –º–µ–∂–¥—É 8:00 –∏ 22:30
    cron.schedule(
      `${minute} ${hour} * * *`,
      () => sendRandomCompliment(chatId, compliments),
      {
        scheduled: true,
        timezone: "Europe/Kiev",
      }
    );
  }
};

bot.command("start", async (ctx) => {
  const userId = ctx.from.id;
  const chatId = ctx.chat.id;

  if (userId === snezhanaId) {
    await ctx.reply("–ü—Ä–∏–≤—ñ—Ç, –°–Ω—ñ–∂–∞–Ω–∞!");
    scheduleDailyMessages(chatId, snezhanaCompliments);
    sendRandomCompliment(chatId, snezhanaCompliments);
  } else {
    const genderKeyboard = new InlineKeyboard()
      .text("–ñ–µ–Ω—â–∏–Ω–∞", "gender_female")
      .text("–ú—É–∂—á–∏–Ω–∞", "gender_male");

    await ctx.reply("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏—Ç–µ –≤–∞—à –ø–æ–ª:", {
      reply_markup: genderKeyboard,
    });
  }
});

bot.on("callback_query", async (ctx) => {
  const chatId = ctx.chat.id;
  const data = ctx.callbackQuery.data;

  if (data === "gender_female") {
    userGender[chatId] = "female"; // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø–æ–ª
    await ctx.reply("üî•");
    scheduleDailyMessages(chatId, womenCompliments);
    sendRandomCompliment(chatId, womenCompliments);
    await ctx.deleteMessage();
  } else if (data === "gender_male") {
    userGender[chatId] = "male"; // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø–æ–ª
    await ctx.reply("üî•");
    scheduleDailyMessages(chatId, menCompliments);
    sendRandomCompliment(chatId, menCompliments);
    await ctx.deleteMessage();
  }
});

const clearChatMessages = async (chatId) => {
  // –í–µ–±—Ö—É–∫–∏ –º–æ–≥—É—Ç –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –º–µ—Ç–æ–¥ getChatHistory
  // –≠—Ç–æ—Ç –∫–æ–¥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–µ—Ä–µ–ø–∏—Å–∞–Ω –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –º–µ—Ç–æ–¥–æ–≤
};

const scheduleDailyCleanup = () => {
  cron.schedule(
    "0 3 * * *",
    async () => {
      for (const chatId in userGender) {
        await clearChatMessages(chatId);
      }
    },
    {
      scheduled: true,
      timezone: "Europe/Kiev",
    }
  );
};

scheduleDailyCleanup();

bot.on("message:text", async (ctx) => {
  const chatId = ctx.chat.id;

  if (!userGender[chatId]) {
    // –ï—Å–ª–∏ –ø–æ–ª –Ω–µ –≤—ã–±—Ä–∞–Ω, –ø—Ä–æ—Å–∏–º –≤—ã–±—Ä–∞—Ç—å
    const genderKeyboard = new InlineKeyboard()
      .text("–ñ–µ–Ω—â–∏–Ω–∞", "gender_female")
      .text("–ú—É–∂—á–∏–Ω–∞", "gender_male");

    await ctx.reply("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏—Ç–µ –≤–∞—à –ø–æ–ª:", {
      reply_markup: genderKeyboard,
    });
  } else {
    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø–æ—Ö–≤–∞–ª—É –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –ø–æ–ª–∞
    const compliments =
      userGender[chatId] === "female" ? womenCompliments : menCompliments;
    sendRandomCompliment(chatId, compliments);
  }
});

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
bot.catch((err) => {
  console.error("Error occurred:", err);
});
